(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6313:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(9466)}])},9466:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return tQ}});var i=s(1874),r=s(9953),n=s(5110),a=s(4795),o=s(6885);class l extends o.hW{get grammarFileName(){return"Typestate.g4"}get literalNames(){return l.literalNames}get symbolicNames(){return l.symbolicNames}get ruleNames(){return l.ruleNames}get serializedATN(){return l._serializedATN}get channelNames(){return l.channelNames}get modeNames(){return l.modeNames}static get _ATN(){return l.__ATN||(l.__ATN=new o.q2().deserialize(l._serializedATN)),l.__ATN}constructor(t){super(t),this._interp=new o.x1(this,l._ATN,l.DecisionsToDFA,new o.db)}}l.T__0=1,l.T__1=2,l.T__2=3,l.T__3=4,l.T__4=5,l.T__5=6,l.T__6=7,l.T__7=8,l.T__8=9,l.T__9=10,l.T__10=11,l.T__11=12,l.T__12=13,l.T__13=14,l.T__14=15,l.T__15=16,l.T__16=17,l.DROP=18,l.END=19,l.ID=20,l.WS=21,l.BlockComment=22,l.LineComment=23,l.EOF=o.WU.EOF,l.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],l.literalNames=[null,"'.'","'[]'","'package'","';'","'import'","'static'","'*'","'typestate'","'{'","'}'","'='","','","':'","'('","')'","'<'","'>'","'drop'","'end'"],l.symbolicNames=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"DROP","END","ID","WS","BlockComment","LineComment"],l.modeNames=["DEFAULT_MODE"],l.ruleNames=["T__0","T__1","T__2","T__3","T__4","T__5","T__6","T__7","T__8","T__9","T__10","T__11","T__12","T__13","T__14","T__15","T__16","DROP","END","ID","WS","BlockComment","LineComment"],l._serializedATN=[4,0,23,158,6,-1,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,2,17,7,17,2,18,7,18,2,19,7,19,2,20,7,20,2,21,7,21,2,22,7,22,1,0,1,0,1,1,1,1,1,1,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,3,1,3,1,4,1,4,1,4,1,4,1,4,1,4,1,4,1,5,1,5,1,5,1,5,1,5,1,5,1,5,1,6,1,6,1,7,1,7,1,7,1,7,1,7,1,7,1,7,1,7,1,7,1,7,1,8,1,8,1,9,1,9,1,10,1,10,1,11,1,11,1,12,1,12,1,13,1,13,1,14,1,14,1,15,1,15,1,16,1,16,1,17,1,17,1,17,1,17,1,17,1,18,1,18,1,18,1,18,1,19,4,19,117,8,19,11,19,12,19,118,1,19,5,19,122,8,19,10,19,12,19,125,9,19,1,20,4,20,128,8,20,11,20,12,20,129,1,20,1,20,1,21,1,21,1,21,1,21,5,21,138,8,21,10,21,12,21,141,9,21,1,21,1,21,1,21,1,21,1,21,1,22,1,22,1,22,1,22,5,22,152,8,22,10,22,12,22,155,9,22,1,22,1,22,1,139,0,23,1,1,3,2,5,3,7,4,9,5,11,6,13,7,15,8,17,9,19,10,21,11,23,12,25,13,27,14,29,15,31,16,33,17,35,18,37,19,39,20,41,21,43,22,45,23,1,0,4,4,0,36,36,65,90,95,95,97,122,5,0,36,36,48,57,65,90,95,95,97,122,3,0,9,10,13,13,32,32,2,0,10,10,13,13,162,0,1,1,0,0,0,0,3,1,0,0,0,0,5,1,0,0,0,0,7,1,0,0,0,0,9,1,0,0,0,0,11,1,0,0,0,0,13,1,0,0,0,0,15,1,0,0,0,0,17,1,0,0,0,0,19,1,0,0,0,0,21,1,0,0,0,0,23,1,0,0,0,0,25,1,0,0,0,0,27,1,0,0,0,0,29,1,0,0,0,0,31,1,0,0,0,0,33,1,0,0,0,0,35,1,0,0,0,0,37,1,0,0,0,0,39,1,0,0,0,0,41,1,0,0,0,0,43,1,0,0,0,0,45,1,0,0,0,1,47,1,0,0,0,3,49,1,0,0,0,5,52,1,0,0,0,7,60,1,0,0,0,9,62,1,0,0,0,11,69,1,0,0,0,13,76,1,0,0,0,15,78,1,0,0,0,17,88,1,0,0,0,19,90,1,0,0,0,21,92,1,0,0,0,23,94,1,0,0,0,25,96,1,0,0,0,27,98,1,0,0,0,29,100,1,0,0,0,31,102,1,0,0,0,33,104,1,0,0,0,35,106,1,0,0,0,37,111,1,0,0,0,39,116,1,0,0,0,41,127,1,0,0,0,43,133,1,0,0,0,45,147,1,0,0,0,47,48,5,46,0,0,48,2,1,0,0,0,49,50,5,91,0,0,50,51,5,93,0,0,51,4,1,0,0,0,52,53,5,112,0,0,53,54,5,97,0,0,54,55,5,99,0,0,55,56,5,107,0,0,56,57,5,97,0,0,57,58,5,103,0,0,58,59,5,101,0,0,59,6,1,0,0,0,60,61,5,59,0,0,61,8,1,0,0,0,62,63,5,105,0,0,63,64,5,109,0,0,64,65,5,112,0,0,65,66,5,111,0,0,66,67,5,114,0,0,67,68,5,116,0,0,68,10,1,0,0,0,69,70,5,115,0,0,70,71,5,116,0,0,71,72,5,97,0,0,72,73,5,116,0,0,73,74,5,105,0,0,74,75,5,99,0,0,75,12,1,0,0,0,76,77,5,42,0,0,77,14,1,0,0,0,78,79,5,116,0,0,79,80,5,121,0,0,80,81,5,112,0,0,81,82,5,101,0,0,82,83,5,115,0,0,83,84,5,116,0,0,84,85,5,97,0,0,85,86,5,116,0,0,86,87,5,101,0,0,87,16,1,0,0,0,88,89,5,123,0,0,89,18,1,0,0,0,90,91,5,125,0,0,91,20,1,0,0,0,92,93,5,61,0,0,93,22,1,0,0,0,94,95,5,44,0,0,95,24,1,0,0,0,96,97,5,58,0,0,97,26,1,0,0,0,98,99,5,40,0,0,99,28,1,0,0,0,100,101,5,41,0,0,101,30,1,0,0,0,102,103,5,60,0,0,103,32,1,0,0,0,104,105,5,62,0,0,105,34,1,0,0,0,106,107,5,100,0,0,107,108,5,114,0,0,108,109,5,111,0,0,109,110,5,112,0,0,110,36,1,0,0,0,111,112,5,101,0,0,112,113,5,110,0,0,113,114,5,100,0,0,114,38,1,0,0,0,115,117,7,0,0,0,116,115,1,0,0,0,117,118,1,0,0,0,118,116,1,0,0,0,118,119,1,0,0,0,119,123,1,0,0,0,120,122,7,1,0,0,121,120,1,0,0,0,122,125,1,0,0,0,123,121,1,0,0,0,123,124,1,0,0,0,124,40,1,0,0,0,125,123,1,0,0,0,126,128,7,2,0,0,127,126,1,0,0,0,128,129,1,0,0,0,129,127,1,0,0,0,129,130,1,0,0,0,130,131,1,0,0,0,131,132,6,20,0,0,132,42,1,0,0,0,133,134,5,47,0,0,134,135,5,42,0,0,135,139,1,0,0,0,136,138,9,0,0,0,137,136,1,0,0,0,138,141,1,0,0,0,139,140,1,0,0,0,139,137,1,0,0,0,140,142,1,0,0,0,141,139,1,0,0,0,142,143,5,42,0,0,143,144,5,47,0,0,144,145,1,0,0,0,145,146,6,21,0,0,146,44,1,0,0,0,147,148,5,47,0,0,148,149,5,47,0,0,149,153,1,0,0,0,150,152,8,3,0,0,151,150,1,0,0,0,152,155,1,0,0,0,153,151,1,0,0,0,153,154,1,0,0,0,154,156,1,0,0,0,155,153,1,0,0,0,156,157,6,22,0,0,157,46,1,0,0,0,6,0,118,123,129,139,153,1,6,0,0],l.DecisionsToDFA=l._ATN.decisionToState.map((t,e)=>new o._7(t,e));class c{constructor(t,e){this.line=t,this.column=e}}let h=new c(1,0);function d(t){return new c(t.line,t.column)}function u(t,e){return{type:"id",pos:t,name:e,string:e}}function _(t,e,s){return{type:"decision",pos:t,label:e,destination:s}}function p(t,e){return{type:"decisionState",pos:t,decisions:e}}function m(t,e,s){return{type:"declaration",pos:t,name:e,states:s}}function f(t,e,s,i,r){return{type:"method",pos:t,returnType:e,name:s,args:i,destination:r}}function x(t,e,s,i){return{type:"state",pos:t,name:e,methods:s,isDroppable:i}}function y(t,e,s){var i;return{type:"typestate",pos:(null!==(i=null!=t?t:e[0])&&void 0!==i?i:s).pos,pkg:t,imports:e,decl:s}}class g extends o._b{get grammarFileName(){return"Typestate.g4"}get literalNames(){return g.literalNames}get symbolicNames(){return g.symbolicNames}get ruleNames(){return g.ruleNames}get serializedATN(){return g._serializedATN}createFailedPredicateException(t,e){return new o.zs(this,t,e)}start(){let t,e=new T(this,this._ctx,this.state);this.enterRule(e,0,g.RULE_start);try{for(this.enterOuterAlt(e,1),this.state=29,this._errHandler.sync(this),t=this._input.LA(1),3===t&&(this.state=26,e._p=this.package_statement(),e.pkg=e._p.node),this.state=34,this._errHandler.sync(this),t=this._input.LA(1);5===t;)this.state=31,e._import_statement=this.import_statement(),e._i.push(e._import_statement),this.state=36,this._errHandler.sync(this),t=this._input.LA(1);this.state=37,e._t=this.typestate_declaration(),e.ast=y(e.pkg,e._i.map(t=>t.node),e._t.node)}catch(t){if(t instanceof o._x)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}ref(t){void 0===t&&(t=0);let e=this._ctx,s=this.state,i=new v(this,this._ctx,s),r=i;this.enterRecursionRule(i,2,g.RULE_ref,t);try{let t;for(this.enterOuterAlt(i,1),this.state=41,i._id=this.id(),i.node=i._id.node,this._ctx.stop=this._input.LT(-1),this.state=51,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,2,this._ctx);2!==t&&t!==o.dx.INVALID_ALT_NUMBER;){if(1===t){var n,a,l;if(null!=this._parseListeners&&this.triggerExitRuleEvent(),r=i,(i=new v(this,e,s))._r=r,this.pushNewRecursionContext(i,2,g.RULE_ref),this.state=44,!this.precpred(this._ctx,1))throw this.createFailedPredicateException("this.precpred(this._ctx, 1)");this.state=45,this.match(g.T__0),this.state=46,i._id=this.id(),i.node=(n=i._r.node.pos,a=i._r.node,l=i._id.node,{type:"member",pos:n,ref:a,id:l,string:"".concat(a.string,".").concat(l.string)})}this.state=53,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,2,this._ctx)}}catch(t){if(t instanceof o._x)i.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.unrollRecursionContexts(e)}return i}javaType(t){void 0===t&&(t=0);let e=this._ctx,s=this.state,i=new w(this,this._ctx,s),r=i;this.enterRecursionRule(i,4,g.RULE_javaType,t);try{let t;for(this.enterOuterAlt(i,1),this.state=55,i._ref=this.ref(0),i.node=i._ref.node,this._ctx.stop=this._input.LT(-1),this.state=63,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,3,this._ctx);2!==t&&t!==o.dx.INVALID_ALT_NUMBER;){if(1===t){var n,a;if(null!=this._parseListeners&&this.triggerExitRuleEvent(),r=i,(i=new w(this,e,s))._j=r,this.pushNewRecursionContext(i,4,g.RULE_javaType),this.state=58,!this.precpred(this._ctx,1))throw this.createFailedPredicateException("this.precpred(this._ctx, 1)");this.state=59,this.match(g.T__1),i.node=(n=i._j.node.pos,a=i._j.node,{type:"arrayType",pos:n,ref:a,string:"".concat(a.string,"[]")})}this.state=65,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,3,this._ctx)}}catch(t){if(t instanceof o._x)i.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.unrollRecursionContexts(e)}return i}package_statement(){let t=new R(this,this._ctx,this.state);this.enterRule(t,6,g.RULE_package_statement);try{var e,s;this.enterOuterAlt(t,1),this.state=66,t._t=this.match(g.T__2),this.state=67,t._ref=this.ref(0),this.state=68,this.match(g.T__3),t.node=(e=d(t._t),s=t._ref.node,{type:"package",pos:e,ref:s})}catch(e){if(e instanceof o._x)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t}import_statement(){let t,e=new b(this,this._ctx,this.state);this.enterRule(e,8,g.RULE_import_statement);try{var s,i,r,n;this.enterOuterAlt(e,1),this.state=71,e._t=this.match(g.T__4),this.state=73,this._errHandler.sync(this),t=this._input.LA(1),6===t&&(this.state=72,e._s=this.match(g.T__5)),this.state=75,e._ref=this.ref(0),this.state=78,this._errHandler.sync(this),t=this._input.LA(1),1===t&&(this.state=76,this.match(g.T__0),this.state=77,e._star=this.match(g.T__6)),this.state=80,this.match(g.T__3),e.node=(s=d(e._t),i=e._ref.node,r=null!=e._s,n=null!=e._star,{type:"import",pos:s,ref:i,staticc:r,star:n})}catch(t){if(t instanceof o._x)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}typestate_declaration(){let t=new E(this,this._ctx,this.state);this.enterRule(t,10,g.RULE_typestate_declaration);try{this.enterOuterAlt(t,1),this.state=83,t._t=this.match(g.T__7),this.state=84,t._ID=this.match(g.ID),this.state=85,this.match(g.T__8),this.state=86,t._typestate_body=this.typestate_body(),this.state=87,this.match(g.T__9),this.state=88,this.match(g.EOF),t.node=m(d(t._t),null!=t._ID?t._ID.text:void 0,t._typestate_body.states)}catch(e){if(e instanceof o._x)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t}typestate_body(){let t,e=new N(this,this._ctx,this.state);this.enterRule(e,12,g.RULE_typestate_body);try{for(this.enterOuterAlt(e,1),this.state=94,this._errHandler.sync(this),t=this._input.LA(1);20===t;)this.state=91,e._state_declaration=this.state_declaration(),e._s.push(e._state_declaration),this.state=96,this._errHandler.sync(this),t=this._input.LA(1);e.states=e._s.map(t=>t.node)}catch(t){if(t instanceof o._x)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}state_declaration(){let t=new j(this,this._ctx,this.state);this.enterRule(t,14,g.RULE_state_declaration);try{this.enterOuterAlt(t,1),this.state=99,t._name=this.match(g.ID),this.state=100,this.match(g.T__10),this.state=101,t._state_body=this.state_body(),t.node=x(d(t._name),null!=t._name?t._name.text:void 0,t._state_body.node.methods,t._state_body.node.isDroppable)}catch(e){if(e instanceof o._x)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t}state_body(){let t,e=new D(this,this._ctx,this.state);this.enterRule(e,16,g.RULE_state_body);try{let s;if(this.enterOuterAlt(e,1),this.state=104,e._t=this.match(g.T__8),this.state=120,this._errHandler.sync(this),t=this._input.LA(1),(-32&t)==0&&(1<<t&1835008)!=0){for(this.state=105,e._method=this.method(),e._m.push(e._method),this.state=110,this._errHandler.sync(this),s=this._interp.adaptivePredict(this._input,7,this._ctx);2!==s&&s!==o.dx.INVALID_ALT_NUMBER;)1===s&&(this.state=106,this.match(g.T__11),this.state=107,e._method=this.method(),e._m.push(e._method)),this.state=112,this._errHandler.sync(this),s=this._interp.adaptivePredict(this._input,7,this._ctx);this.state=118,this._errHandler.sync(this),t=this._input.LA(1),12===t&&(this.state=113,this.match(g.T__11),this.state=114,this.match(g.DROP),this.state=115,this.match(g.T__12),this.state=116,this.match(g.END),e.isDroppable=!0)}this.state=122,this.match(g.T__9),e.node=x(d(e._t),null,e._m.map(t=>t.node),e.isDroppable)}catch(t){if(t instanceof o._x)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}method(){let t,e=new k(this,this._ctx,this.state);this.enterRule(e,18,g.RULE_method);try{if(this.enterOuterAlt(e,1),this.state=125,e._return_type=this.javaType(0),this.state=126,e._name=this.match(g.ID),this.state=127,this.match(g.T__13),this.state=136,this._errHandler.sync(this),t=this._input.LA(1),(-32&t)==0&&(1<<t&1835008)!=0)for(this.state=128,e._javaType=this.javaType(0),e._args.push(e._javaType),this.state=133,this._errHandler.sync(this),t=this._input.LA(1);12===t;)this.state=129,this.match(g.T__11),this.state=130,e._javaType=this.javaType(0),e._args.push(e._javaType),this.state=135,this._errHandler.sync(this),t=this._input.LA(1);switch(this.state=138,this.match(g.T__14),this.state=139,this.match(g.T__12),this.state=149,this._errHandler.sync(this),this._input.LA(1)){case 18:case 19:case 20:this.state=140,e._id=this.id(),e.destination=e._id.node;break;case 9:this.state=143,e._state_body=this.state_body(),e.destination=e._state_body.node;break;case 16:this.state=146,e._decision_state=this.decision_state(),e.destination=e._decision_state.node;break;default:throw new o.z5(this)}e.node=f(e._return_type.node.pos,e._return_type.node,null!=e._name?e._name.text:void 0,e._args.map(t=>t.node),e.destination)}catch(t){if(t instanceof o._x)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}decision_state(){let t,e=new L(this,this._ctx,this.state);this.enterRule(e,20,g.RULE_decision_state);try{for(this.enterOuterAlt(e,1),this.state=153,e._t=this.match(g.T__15),this.state=154,e._decision=this.decision(),e._decisions.push(e._decision),this.state=159,this._errHandler.sync(this),t=this._input.LA(1);12===t;)this.state=155,this.match(g.T__11),this.state=156,e._decision=this.decision(),e._decisions.push(e._decision),this.state=161,this._errHandler.sync(this),t=this._input.LA(1);this.state=162,this.match(g.T__16),e.node=p(d(e._t),e._decisions.map(t=>t.node))}catch(t){if(t instanceof o._x)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}decision(){let t=new A(this,this._ctx,this.state);this.enterRule(t,22,g.RULE_decision);try{switch(this.enterOuterAlt(t,1),this.state=165,t._label=this.match(g.ID),this.state=166,this.match(g.T__12),this.state=173,this._errHandler.sync(this),this._input.LA(1)){case 18:case 19:case 20:this.state=167,t._id=this.id(),t.node=_(d(t._label),null!=t._label?t._label.text:void 0,t._id.node);break;case 9:this.state=170,t._state_body=this.state_body(),t.node=_(d(t._label),null!=t._label?t._label.text:void 0,t._state_body.node);break;default:throw new o.z5(this)}}catch(e){if(e instanceof o._x)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t}id(){let t=new C(this,this._ctx,this.state);this.enterRule(t,24,g.RULE_id);try{switch(this.state=181,this._errHandler.sync(this),this._input.LA(1)){case 18:this.enterOuterAlt(t,1),this.state=175,t._DROP=this.match(g.DROP),t.node=u(d(t._DROP),null!=t._DROP?t._DROP.text:void 0);break;case 19:this.enterOuterAlt(t,2),this.state=177,t._END=this.match(g.END),t.node=u(d(t._END),null!=t._END?t._END.text:void 0);break;case 20:this.enterOuterAlt(t,3),this.state=179,t._ID=this.match(g.ID),t.node=u(d(t._ID),null!=t._ID?t._ID.text:void 0);break;default:throw new o.z5(this)}}catch(e){if(e instanceof o._x)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t}sempred(t,e,s){switch(e){case 1:return this.ref_sempred(t,s);case 2:return this.javaType_sempred(t,s)}return!0}ref_sempred(t,e){return 0!==e||this.precpred(this._ctx,1)}javaType_sempred(t,e){return 1!==e||this.precpred(this._ctx,1)}static get _ATN(){return g.__ATN||(g.__ATN=new o.q2().deserialize(g._serializedATN)),g.__ATN}constructor(t){super(t),this._interp=new o.$F(this,g._ATN,g.DecisionsToDFA,new o.db)}}g.T__0=1,g.T__1=2,g.T__2=3,g.T__3=4,g.T__4=5,g.T__5=6,g.T__6=7,g.T__7=8,g.T__8=9,g.T__9=10,g.T__10=11,g.T__11=12,g.T__12=13,g.T__13=14,g.T__14=15,g.T__15=16,g.T__16=17,g.DROP=18,g.END=19,g.ID=20,g.WS=21,g.BlockComment=22,g.LineComment=23,g.EOF=o.WU.EOF,g.RULE_start=0,g.RULE_ref=1,g.RULE_javaType=2,g.RULE_package_statement=3,g.RULE_import_statement=4,g.RULE_typestate_declaration=5,g.RULE_typestate_body=6,g.RULE_state_declaration=7,g.RULE_state_body=8,g.RULE_method=9,g.RULE_decision_state=10,g.RULE_decision=11,g.RULE_id=12,g.literalNames=[null,"'.'","'[]'","'package'","';'","'import'","'static'","'*'","'typestate'","'{'","'}'","'='","','","':'","'('","')'","'<'","'>'","'drop'","'end'"],g.symbolicNames=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"DROP","END","ID","WS","BlockComment","LineComment"],g.ruleNames=["start","ref","javaType","package_statement","import_statement","typestate_declaration","typestate_body","state_declaration","state_body","method","decision_state","decision","id"],g._serializedATN=[4,1,23,184,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,1,0,1,0,1,0,3,0,30,8,0,1,0,5,0,33,8,0,10,0,12,0,36,9,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,5,1,50,8,1,10,1,12,1,53,9,1,1,2,1,2,1,2,1,2,1,2,1,2,1,2,5,2,62,8,2,10,2,12,2,65,9,2,1,3,1,3,1,3,1,3,1,3,1,4,1,4,3,4,74,8,4,1,4,1,4,1,4,3,4,79,8,4,1,4,1,4,1,4,1,5,1,5,1,5,1,5,1,5,1,5,1,5,1,5,1,6,5,6,93,8,6,10,6,12,6,96,9,6,1,6,1,6,1,7,1,7,1,7,1,7,1,7,1,8,1,8,1,8,1,8,5,8,109,8,8,10,8,12,8,112,9,8,1,8,1,8,1,8,1,8,1,8,3,8,119,8,8,3,8,121,8,8,1,8,1,8,1,8,1,9,1,9,1,9,1,9,1,9,1,9,5,9,132,8,9,10,9,12,9,135,9,9,3,9,137,8,9,1,9,1,9,1,9,1,9,1,9,1,9,1,9,1,9,1,9,1,9,1,9,3,9,150,8,9,1,9,1,9,1,10,1,10,1,10,1,10,5,10,158,8,10,10,10,12,10,161,9,10,1,10,1,10,1,10,1,11,1,11,1,11,1,11,1,11,1,11,1,11,1,11,3,11,174,8,11,1,12,1,12,1,12,1,12,1,12,1,12,3,12,182,8,12,1,12,0,2,2,4,13,0,2,4,6,8,10,12,14,16,18,20,22,24,0,0,188,0,29,1,0,0,0,2,40,1,0,0,0,4,54,1,0,0,0,6,66,1,0,0,0,8,71,1,0,0,0,10,83,1,0,0,0,12,94,1,0,0,0,14,99,1,0,0,0,16,104,1,0,0,0,18,125,1,0,0,0,20,153,1,0,0,0,22,165,1,0,0,0,24,181,1,0,0,0,26,27,3,6,3,0,27,28,6,0,-1,0,28,30,1,0,0,0,29,26,1,0,0,0,29,30,1,0,0,0,30,34,1,0,0,0,31,33,3,8,4,0,32,31,1,0,0,0,33,36,1,0,0,0,34,32,1,0,0,0,34,35,1,0,0,0,35,37,1,0,0,0,36,34,1,0,0,0,37,38,3,10,5,0,38,39,6,0,-1,0,39,1,1,0,0,0,40,41,6,1,-1,0,41,42,3,24,12,0,42,43,6,1,-1,0,43,51,1,0,0,0,44,45,10,1,0,0,45,46,5,1,0,0,46,47,3,24,12,0,47,48,6,1,-1,0,48,50,1,0,0,0,49,44,1,0,0,0,50,53,1,0,0,0,51,49,1,0,0,0,51,52,1,0,0,0,52,3,1,0,0,0,53,51,1,0,0,0,54,55,6,2,-1,0,55,56,3,2,1,0,56,57,6,2,-1,0,57,63,1,0,0,0,58,59,10,1,0,0,59,60,5,2,0,0,60,62,6,2,-1,0,61,58,1,0,0,0,62,65,1,0,0,0,63,61,1,0,0,0,63,64,1,0,0,0,64,5,1,0,0,0,65,63,1,0,0,0,66,67,5,3,0,0,67,68,3,2,1,0,68,69,5,4,0,0,69,70,6,3,-1,0,70,7,1,0,0,0,71,73,5,5,0,0,72,74,5,6,0,0,73,72,1,0,0,0,73,74,1,0,0,0,74,75,1,0,0,0,75,78,3,2,1,0,76,77,5,1,0,0,77,79,5,7,0,0,78,76,1,0,0,0,78,79,1,0,0,0,79,80,1,0,0,0,80,81,5,4,0,0,81,82,6,4,-1,0,82,9,1,0,0,0,83,84,5,8,0,0,84,85,5,20,0,0,85,86,5,9,0,0,86,87,3,12,6,0,87,88,5,10,0,0,88,89,5,0,0,1,89,90,6,5,-1,0,90,11,1,0,0,0,91,93,3,14,7,0,92,91,1,0,0,0,93,96,1,0,0,0,94,92,1,0,0,0,94,95,1,0,0,0,95,97,1,0,0,0,96,94,1,0,0,0,97,98,6,6,-1,0,98,13,1,0,0,0,99,100,5,20,0,0,100,101,5,11,0,0,101,102,3,16,8,0,102,103,6,7,-1,0,103,15,1,0,0,0,104,120,5,9,0,0,105,110,3,18,9,0,106,107,5,12,0,0,107,109,3,18,9,0,108,106,1,0,0,0,109,112,1,0,0,0,110,108,1,0,0,0,110,111,1,0,0,0,111,118,1,0,0,0,112,110,1,0,0,0,113,114,5,12,0,0,114,115,5,18,0,0,115,116,5,13,0,0,116,117,5,19,0,0,117,119,6,8,-1,0,118,113,1,0,0,0,118,119,1,0,0,0,119,121,1,0,0,0,120,105,1,0,0,0,120,121,1,0,0,0,121,122,1,0,0,0,122,123,5,10,0,0,123,124,6,8,-1,0,124,17,1,0,0,0,125,126,3,4,2,0,126,127,5,20,0,0,127,136,5,14,0,0,128,133,3,4,2,0,129,130,5,12,0,0,130,132,3,4,2,0,131,129,1,0,0,0,132,135,1,0,0,0,133,131,1,0,0,0,133,134,1,0,0,0,134,137,1,0,0,0,135,133,1,0,0,0,136,128,1,0,0,0,136,137,1,0,0,0,137,138,1,0,0,0,138,139,5,15,0,0,139,149,5,13,0,0,140,141,3,24,12,0,141,142,6,9,-1,0,142,150,1,0,0,0,143,144,3,16,8,0,144,145,6,9,-1,0,145,150,1,0,0,0,146,147,3,20,10,0,147,148,6,9,-1,0,148,150,1,0,0,0,149,140,1,0,0,0,149,143,1,0,0,0,149,146,1,0,0,0,150,151,1,0,0,0,151,152,6,9,-1,0,152,19,1,0,0,0,153,154,5,16,0,0,154,159,3,22,11,0,155,156,5,12,0,0,156,158,3,22,11,0,157,155,1,0,0,0,158,161,1,0,0,0,159,157,1,0,0,0,159,160,1,0,0,0,160,162,1,0,0,0,161,159,1,0,0,0,162,163,5,17,0,0,163,164,6,10,-1,0,164,21,1,0,0,0,165,166,5,20,0,0,166,173,5,13,0,0,167,168,3,24,12,0,168,169,6,11,-1,0,169,174,1,0,0,0,170,171,3,16,8,0,171,172,6,11,-1,0,172,174,1,0,0,0,173,167,1,0,0,0,173,170,1,0,0,0,174,23,1,0,0,0,175,176,5,18,0,0,176,182,6,12,-1,0,177,178,5,19,0,0,178,182,6,12,-1,0,179,180,5,20,0,0,180,182,6,12,-1,0,181,175,1,0,0,0,181,177,1,0,0,0,181,179,1,0,0,0,182,25,1,0,0,0,16,29,34,51,63,73,78,94,110,118,120,133,136,149,159,173,181],g.DecisionsToDFA=g._ATN.decisionToState.map((t,e)=>new o._7(t,e));class T extends o._T{typestate_declaration(){return this.getTypedRuleContext(E,0)}package_statement(){return this.getTypedRuleContext(R,0)}import_statement_list(){return this.getTypedRuleContexts(b)}import_statement(t){return this.getTypedRuleContext(b,t)}get ruleIndex(){return g.RULE_start}enterRule(t){t.enterStart&&t.enterStart(this)}exitRule(t){t.exitStart&&t.exitStart(this)}accept(t){return t.visitStart?t.visitStart(this):t.visitChildren(this)}constructor(t,e,s){super(e,s),this._i=[],this.parser=t}}class v extends o._T{id(){return this.getTypedRuleContext(C,0)}ref(){return this.getTypedRuleContext(v,0)}get ruleIndex(){return g.RULE_ref}enterRule(t){t.enterRef&&t.enterRef(this)}exitRule(t){t.exitRef&&t.exitRef(this)}accept(t){return t.visitRef?t.visitRef(this):t.visitChildren(this)}constructor(t,e,s){super(e,s),this.parser=t}}class w extends o._T{ref(){return this.getTypedRuleContext(v,0)}javaType(){return this.getTypedRuleContext(w,0)}get ruleIndex(){return g.RULE_javaType}enterRule(t){t.enterJavaType&&t.enterJavaType(this)}exitRule(t){t.exitJavaType&&t.exitJavaType(this)}accept(t){return t.visitJavaType?t.visitJavaType(this):t.visitChildren(this)}constructor(t,e,s){super(e,s),this.parser=t}}class R extends o._T{ref(){return this.getTypedRuleContext(v,0)}get ruleIndex(){return g.RULE_package_statement}enterRule(t){t.enterPackage_statement&&t.enterPackage_statement(this)}exitRule(t){t.exitPackage_statement&&t.exitPackage_statement(this)}accept(t){return t.visitPackage_statement?t.visitPackage_statement(this):t.visitChildren(this)}constructor(t,e,s){super(e,s),this.parser=t}}class b extends o._T{ref(){return this.getTypedRuleContext(v,0)}get ruleIndex(){return g.RULE_import_statement}enterRule(t){t.enterImport_statement&&t.enterImport_statement(this)}exitRule(t){t.exitImport_statement&&t.exitImport_statement(this)}accept(t){return t.visitImport_statement?t.visitImport_statement(this):t.visitChildren(this)}constructor(t,e,s){super(e,s),this.parser=t}}class E extends o._T{ID(){return this.getToken(g.ID,0)}typestate_body(){return this.getTypedRuleContext(N,0)}EOF(){return this.getToken(g.EOF,0)}get ruleIndex(){return g.RULE_typestate_declaration}enterRule(t){t.enterTypestate_declaration&&t.enterTypestate_declaration(this)}exitRule(t){t.exitTypestate_declaration&&t.exitTypestate_declaration(this)}accept(t){return t.visitTypestate_declaration?t.visitTypestate_declaration(this):t.visitChildren(this)}constructor(t,e,s){super(e,s),this.parser=t}}class N extends o._T{state_declaration_list(){return this.getTypedRuleContexts(j)}state_declaration(t){return this.getTypedRuleContext(j,t)}get ruleIndex(){return g.RULE_typestate_body}enterRule(t){t.enterTypestate_body&&t.enterTypestate_body(this)}exitRule(t){t.exitTypestate_body&&t.exitTypestate_body(this)}accept(t){return t.visitTypestate_body?t.visitTypestate_body(this):t.visitChildren(this)}constructor(t,e,s){super(e,s),this._s=[],this.parser=t}}class j extends o._T{state_body(){return this.getTypedRuleContext(D,0)}ID(){return this.getToken(g.ID,0)}get ruleIndex(){return g.RULE_state_declaration}enterRule(t){t.enterState_declaration&&t.enterState_declaration(this)}exitRule(t){t.exitState_declaration&&t.exitState_declaration(this)}accept(t){return t.visitState_declaration?t.visitState_declaration(this):t.visitChildren(this)}constructor(t,e,s){super(e,s),this.parser=t}}class D extends o._T{method_list(){return this.getTypedRuleContexts(k)}method(t){return this.getTypedRuleContext(k,t)}DROP(){return this.getToken(g.DROP,0)}END(){return this.getToken(g.END,0)}get ruleIndex(){return g.RULE_state_body}enterRule(t){t.enterState_body&&t.enterState_body(this)}exitRule(t){t.exitState_body&&t.exitState_body(this)}accept(t){return t.visitState_body?t.visitState_body(this):t.visitChildren(this)}constructor(t,e,s){super(e,s),this._m=[],this.parser=t}}class k extends o._T{javaType_list(){return this.getTypedRuleContexts(w)}javaType(t){return this.getTypedRuleContext(w,t)}ID(){return this.getToken(g.ID,0)}id(){return this.getTypedRuleContext(C,0)}state_body(){return this.getTypedRuleContext(D,0)}decision_state(){return this.getTypedRuleContext(L,0)}get ruleIndex(){return g.RULE_method}enterRule(t){t.enterMethod&&t.enterMethod(this)}exitRule(t){t.exitMethod&&t.exitMethod(this)}accept(t){return t.visitMethod?t.visitMethod(this):t.visitChildren(this)}constructor(t,e,s){super(e,s),this._args=[],this.parser=t}}class L extends o._T{decision_list(){return this.getTypedRuleContexts(A)}decision(t){return this.getTypedRuleContext(A,t)}get ruleIndex(){return g.RULE_decision_state}enterRule(t){t.enterDecision_state&&t.enterDecision_state(this)}exitRule(t){t.exitDecision_state&&t.exitDecision_state(this)}accept(t){return t.visitDecision_state?t.visitDecision_state(this):t.visitChildren(this)}constructor(t,e,s){super(e,s),this._decisions=[],this.parser=t}}class A extends o._T{ID(){return this.getToken(g.ID,0)}id(){return this.getTypedRuleContext(C,0)}state_body(){return this.getTypedRuleContext(D,0)}get ruleIndex(){return g.RULE_decision}enterRule(t){t.enterDecision&&t.enterDecision(this)}exitRule(t){t.exitDecision&&t.exitDecision(this)}accept(t){return t.visitDecision?t.visitDecision(this):t.visitChildren(this)}constructor(t,e,s){super(e,s),this.parser=t}}class C extends o._T{DROP(){return this.getToken(g.DROP,0)}END(){return this.getToken(g.END,0)}ID(){return this.getToken(g.ID,0)}get ruleIndex(){return g.RULE_id}enterRule(t){t.enterId&&t.enterId(this)}exitRule(t){t.exitId&&t.exitId(this)}accept(t){return t.visitId?t.visitId(this):t.visitChildren(this)}constructor(t,e,s){super(e,s),this.parser=t}}class S extends Error{constructor(t,e,s){super("".concat(t," (at ").concat("".concat(e.line,":").concat(e.column),")")),this.originalMessage=t,this.loc=e,this.endLoc=s||e}}function I(t,e,s){return new S(t,e,s)}class H extends o.cK{syntaxError(t,e,s,i,r,n){throw new S(r,new c(s,i))}constructor(){super()}}function O(t){let e=new o.xf(t),s=new l(e),i=new o.c7(s),r=new g(i);return r.removeErrorListeners(),r.addErrorListener(new H),r.start().ast}function U(t){let e=new o.xf(t),s=new l(e),i=new o.c7(s),r=new g(i);r.removeErrorListeners(),r.addErrorListener(new H);try{return r.ref().node}catch(t){return u(h,"ERROR")}}class P{unknown(){return"unknown:".concat(this.unknownUuid++)}decision(){return"decision:".concat(this.decisionUuid++)}get(t){let e=this.cache.get(t);if(e)return e;if("decisionState"===t.type)e=this.decision();else{var s;e=null!==(s=t.name)&&void 0!==s?s:this.unknown()}return this.cache.set(t,e),e}constructor(){this.cache=new Map,this.unknownUuid=1,this.decisionUuid=1}}function M(t,e,s){if(/^unknown:/.test(e))t.states.add(e);else if(/^decision:/.test(e))t.choices.add(e);else if("end"===e)t.states.add(e),t.final.add(e);else if(!t.states.has(e))throw I("State not defined: ".concat(e),s.pos)}function F(t){let e=new P,s=t.decl.states;if(0===s.length)throw I("Typestate without states",t.pos);let i={package:t.pkg,imports:t.imports,states:new Set,choices:new Set,methods:[],labels:[],start:e.get(s[0]),final:new Set,mTransitions:[],lTransitions:[]};for(let t of s){if("end"===t.name)throw I('"end" is a reserved state name',t.pos);if(i.states.has(e.get(t)))throw I("Duplicated ".concat(t.name," state"),t.pos);i.states.add(e.get(t))}return s.reduce((t,s)=>(function t(e,s,i){let r=i.get(e);M(s,r,e),e.isDroppable&&s.final.add(r);for(let t=0;t<e.methods.length;t++){let s=e.methods[t];for(let i=0;i<t;i++)if(function(t,e){if(t.name!==e.name||t.args.length!==e.args.length)return!1;for(let s=0;s<t.args.length;s++)if(t.args[s].string!==e.args[s].string)return!1;return!0}(s,e.methods[i]))throw I("Duplicate method: ".concat(s.name,"(").concat(s.args.map(t=>t.string).join(", "),")"),s.pos)}return e.methods.reduce((e,s)=>(function(e,s,i,r){let n;let a=s.destination;"state"===a.type?(t(a,i,r),n=r.get(a)):"decisionState"===a.type?(function(e,s,i){let r=i.get(e);M(s,r,e);let n=new Set;for(let t of e.decisions){let{label:e,pos:s}=t;if(n.has(e))throw I("Duplicate case label: ".concat(e),s);n.add(e)}e.decisions.reduce((e,s)=>(function(e,s,i,r){let n,{label:a,destination:o}=s;"state"===o.type?(t(o,i,r),n=r.get(o)):n=o.name,M(i,n,o);let l={name:a};return i.labels.push(l),i.lTransitions.push({from:e,transition:l,to:n}),i})(r,s,e,i),s)}(a,i,r),n=r.get(a)):n=a.name,M(i,n,a);let o={name:s.name,arguments:s.args.map(t=>t.string),returnType:s.returnType.string};return i.methods.push(o),i.mTransitions.push({from:e,transition:o,to:n}),i})(r,s,e,i),s)})(s,t,e),i)}function Z(t,e){if(/^decision:/.test(t)){if(e.choices.has(t))return;throw Error("".concat(t," is not in choices set"))}if(!e.states.has(t))throw Error("".concat(t," is not in states set"))}function z(t,e){let s=[];for(let r of e.mTransitions){var i;r.from===t&&s.push(f(h,U(r.transition.returnType),r.transition.name,r.transition.arguments.map(U),(Z(i=r.to,e),/^unknown:/.test(i))?B(i,e):/^decision:/.test(i)?function(t,e){let s=[];for(let i of e.lTransitions)i.from===t&&s.push(_(h,i.transition.name,function(t,e){if(Z(t,e),/^unknown:/.test(t))return B(t,e);if(/^decision:/.test(t))throw Error("Cannot have a transition from a decision state to ".concat(t));return u(h,t)}(i.to,e)));return p(h,s)}(i,e):u(h,i)))}return s}function B(t,e){return x(h,null,z(t,e),e.final.has(t))}function J(t,e){return x(h,t,z(t,e),e.final.has(t))}function W(t){return t.string}function q(t){return"id"===t.type?W(t):"state"===t.type?"{\n".concat(V(t),"    }"):"<".concat(t.decisions.map($).join(", "),">")}function $(t){let{label:e,destination:s}=t;return"".concat(e,": ").concat(q(s))}function G(t){return"    ".concat(W(t.returnType)," ").concat(t.name,"(").concat(t.args.map(W).join(", "),"): ").concat(q(t.destination))}function V(t){let e=t.methods.map(G);return t.isDroppable&&e.push("    drop: end"),"".concat(e.join(",\n"),"\n")}function K(t){return"  ".concat(t.name," = {\n").concat(V(t),"  }")}var X=s(8561),Y=s(2946),Q=s(6351),tt=s(5751),te=s(9139),ts=s(6294),ti=s(1063),tr=s(457),tn=s(5934),ta=s(2544),to=s.n(ta);function tl(t){return{...t,states:Array.from(t.states),choices:Array.from(t.choices),final:Array.from(t.final)}}async function tc(t){if("undefined"==typeof navigator||!navigator.clipboard||!navigator.clipboard.writeText)return to()(t);try{return await navigator.clipboard.writeText(t),!0}catch(e){return console.log("Copy error",e),to()(t)}}function th(){let{enqueueSnackbar:t}=(0,tn.Ds)();return async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Copied!",i=await tc(e);i?t(s,{variant:"default"}):t("Could not copy to clipboard",{variant:"error"})}}let td=(0,n.Z)(t=>({menuButton:{marginRight:t.spacing(2)},menuItem:{lineHeight:"48px"}})),tu=[["Preview","preview"],["Typestate → AST","typestate-ast"],["AST → Automaton","ast-doa"],["Automaton → AST","automaton-ast"],["AST → Typestate","ast-typestate"]];function t_(){let t=td(),[e,s]=(0,r.useState)(null),n=t=>{s(t.currentTarget)},a=()=>{s(null)},o=t=>()=>{a(),function(t){let e=document.getElementById(t);if(e){let t=e.getBoundingClientRect().top+window.pageYOffset-72;try{window.scrollTo({top:t,behavior:"smooth"})}catch(e){window.scrollTo(0,t)}}}(t)};return(0,i.jsxs)("div",{children:[(0,i.jsx)(tt.Z,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu","aria-controls":"nav-menu","aria-haspopup":"true",onClick:n,children:(0,i.jsx)(ts.Z,{})}),(0,i.jsx)(ti.Z,{id:"nav-menu",anchorEl:e,keepMounted:!0,open:!!e,onClose:a,children:tu.map((e,s)=>(0,i.jsx)(tr.Z,{className:t.menuItem,onClick:o(e[1]),children:e[0]},s))})]})}var tp=s(6968);let tm=(0,n.Z)(t=>({menuButton:{marginRight:t.spacing(2)},menuItem:{lineHeight:"48px"}})),tf={baseUrl:"https://typestate-editor.github.io/examples/",ext:".protocol",list:["Alice","Bob","Collection","CProtocol","Drone","File","Iterator","DroppableIterator","NodeA","NodeB"]};async function tx(t){let e="".concat(tf.list[t]).concat(tf.ext),s="localhost"===location.hostname?"/examples/".concat(e):"".concat(tf.baseUrl).concat(e),i=await fetch(s,{method:"GET",headers:{"Content-Type":"text/plain"}});return i.text()}function ty(){let t=tm(),[e,s]=(0,r.useState)(null),{enqueueSnackbar:n,closeSnackbar:a}=(0,tn.Ds)(),o=th(),l=t=>{s(t.currentTarget)},c=()=>{s(null)},h=(t,e)=>()=>{let s;c();let i=setTimeout(()=>{s=n("Fetching example ".concat(t,"..."),{variant:"info",persist:!0})},1e3);tx(e).then(e=>{s&&a(s),clearTimeout(i),o(e,"Copied example ".concat(t,"!"))},e=>{s&&a(s),clearTimeout(i),n("Could not fetch example ".concat(t),{variant:"error"}),console.error(e)})};return(0,i.jsxs)("div",{children:[(0,i.jsx)(tp.Z,{className:t.menuButton,color:"inherit","aria-label":"menu","aria-controls":"nav-menu","aria-haspopup":"true",onClick:l,children:"Examples"}),(0,i.jsx)(ti.Z,{id:"nav-menu",anchorEl:e,keepMounted:!0,open:!!e,onClose:c,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:tf.list.map((e,s)=>(0,i.jsx)(tr.Z,{className:t.menuItem,onClick:h(e,s),children:e},s))})]})}let tg=(0,n.Z)(t=>({root:{flexGrow:1},offset:{...t.mixins.toolbar,marginBottom:t.spacing(1)},title:{flexGrow:1},white:{color:"white"}}));function tT(t){let e=tg();return(0,i.jsxs)("div",{className:e.root,children:[(0,i.jsx)(X.Z,{position:"fixed",children:(0,i.jsxs)(Y.Z,{children:[(0,i.jsx)(t_,{}),(0,i.jsx)(Q.Z,{variant:"h6",className:e.title,children:"Typestate Editor"}),(0,i.jsx)(ty,{}),(0,i.jsx)("a",{href:"https://github.com/typestate-editor/typestate-editor.github.io",target:"_blank",rel:"noopener",children:(0,i.jsx)(tt.Z,{className:e.white,"aria-label":"GitHub repository",component:"span",children:(0,i.jsx)(te.Z,{})})})]})}),(0,i.jsx)("div",{className:e.offset})]})}let tv=(0,n.Z)(t=>({root:{display:"block"},toolbar:{"& > *":{float:"left",margin:t.spacing(2)}},clear:{clear:"both"}}));function tw(t){let e=tv(),{title:s,buttons:r}=t;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:e.toolbar,children:[s?(0,i.jsx)(Q.Z,{variant:"h6",children:s}):null,r.map((t,e)=>{let[s,r]=t;return(0,i.jsx)(tp.Z,{variant:"outlined",disabled:!1===r,onClick:!1===r?void 0:r,children:s},e)})]}),(0,i.jsx)("div",{className:e.clear})]})}let tR={wrapper:{display:"flex",position:"relative",textAlign:"initial",border:"1px solid lightgray"},full:{width:"100%",height:"100%"},hide:{display:"none"}},tb={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};function tE(t){let{width:e,height:s,isEditorReady:r,loading:n,refDiv:a}=t;return(0,i.jsxs)("div",{style:{...tR.wrapper,width:e,height:s},children:[!r&&(0,i.jsx)("div",{style:tb,children:n}),(0,i.jsx)("div",{ref:a,style:{...tR.full,...!r&&tR.hide}})]})}let tN={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"<",close:">"}],folding:{markers:{start:RegExp("^\\s*//\\s*(?:(?:#?region\\b)|(?:<editor-fold\\b))"),end:RegExp("^\\s*//\\s*(?:(?:#?endregion\\b)|(?:</editor-fold>))")}}},tj={defaultToken:"",tokenPostfix:".protocol",keywords:["default","package","boolean","this","double","implements","byte","import","public","throws","extends","int","short","char","void","long","float","true","false","end","typestate"],brackets:[{open:"{",close:"}",token:"delimiter.bracket"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}],tokenizer:{root:[[/[a-z_$][\w$]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/[<>]/,"@brackets"],[/[;,]/,"delimiter"]],whitespace:[[/[ \t\r\n\f]+/,""],[/\/\*\*(?!\/)/,"comment.doc","@javadoc"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],javadoc:[[/[^\/*]+/,"comment.doc"],[/\/\*/,"comment.doc.invalid"],[/\*\//,"comment.doc","@pop"],[/[\/*]/,"comment.doc"]]}},tD=function(t){let e={id:"typestate",extensions:[".protocol"],aliases:["mungo","typestate","protocol"],mimetypes:["text/mungo"]};t.languages.register(e),t.languages.setMonarchTokensProvider(e.id,tj),t.languages.onLanguage(e.id,()=>{t.languages.setLanguageConfiguration(e.id,tN)})},tk={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.20.0/min/vs"}},tL=()=>{},tA=()=>window.monaco;var tC=new class{injectScripts(t){document.body.appendChild(t)}createScript(t){let e=document.createElement("script");return t&&(e.src=t),e}createMonacoLoaderScript(t){let e=this.createScript("".concat(tk.paths.vs,"/loader.js"));return e.onload=()=>this.injectScripts(t),e.onerror=t=>{console.error(t),this.deferred.reject(Error("Error loading ".concat(tk.paths.vs,"/loader.js")))},e}createMainScript(){let t=this.createScript();return t.innerHTML="\n      require.config(".concat(JSON.stringify(tk),");\n      require(['vs/editor/editor.main'], function() {\n        document.dispatchEvent(new Event('monaco_init'));\n      });\n    "),t.onerror=t=>{console.error(t),this.deferred.reject(Error("Error creating main script"))},t}prepareMonaco(){let t=tA();if(t){try{tD(t),this.deferred.resolve(t)}catch(t){this.deferred.reject(t)}return!0}return!1}init(){if(!this.isInitialized&&!this.prepareMonaco()){document.addEventListener("monaco_init",this.handleMainScriptLoad);let t=this.createMainScript(),e=this.createMonacoLoaderScript(t);this.injectScripts(e)}return this.isInitialized=!0,this.deferred}constructor(){this.handleMainScriptLoad=()=>{document.removeEventListener("monaco_init",this.handleMainScriptLoad),this.prepareMonaco()||this.deferred.reject(Error("Could not load monaco-editor"))},this.isInitialized=!1,this.deferred=function(){let t=tL,e=tL,s=new Promise((s,i)=>{t=s,e=i}),i=()=>{e(Error("Promise cancelled"))};return{promise:s,resolve:t,reject:e,cancel:i}}()}};let tS={base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#202124"}},tI=[],tH=t=>(0,r.useEffect)(t,tI),tO=function(t,e){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=(0,r.useRef)(!0);(0,r.useEffect)(i.current||!s?()=>{i.current=!1}:t,e)},tU=t=>{let{language:e,onReady:s,theme:n="light",width:a="100%",height:o="100%",loading:l="Loading...",options:c={},overrideServices:h={},markers:d=[]}=t,[u,_]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!0),f=(0,r.useRef)(),x=(0,r.useRef)(),y=(0,r.useRef)(null),{enqueueSnackbar:g}=(0,tn.Ds)();tH(()=>{let t=tC.init();return t.promise.then(t=>(x.current=t)&&m(!1)).catch(t=>{console.error(t),g("Error initializating Monaco Editor",{variant:"error",preventDuplicate:!0})}),()=>f.current?f.current.dispose():t.cancel()}),tO(()=>{x.current.editor.setModelLanguage(f.current.getModel(),e)},[e],u),tO(()=>{x.current.editor.setTheme(n)},[n],u),tO(()=>{f.current.updateOptions(c)},[c],u),tO(()=>{let t=f.current.getModel();x.current.editor.setModelMarkers(t,"owner",d)},[d],u);let T=(0,r.useCallback)(()=>{f.current=x.current.editor.create(y.current,{value:"",language:e,automaticLayout:!0,...c},h),s(f.current.getValue.bind(f.current)),x.current.editor.defineTheme("dark",tS),x.current.editor.setTheme(n),_(!0)},[e,c,h,n]);return(0,r.useEffect)(()=>{p||u||T()},[p,u,T]),(0,i.jsx)(tE,{width:a,height:o,isEditorReady:u,loading:l,refDiv:y})},tP={width:"500px",height:"550px"},tM=(0,n.Z)(t=>({root:{display:"block",margin:t.spacing(1)},side:{float:"left",margin:"0 10px"},hide:{display:"none"},show:{display:"block"},clear:{clear:"both"}})),tF={minimap:{enabled:!1}};function tZ(t){let e=tM(),{title:s,fn:n,render:a}=t,[o,l]=(0,r.useState)({result:null,error:null}),{result:c,error:h}=o,[{fn:d},u]=(0,r.useState)({fn:null}),_=h instanceof S?[{severity:8,message:h.originalMessage,startLineNumber:h.loc.line,startColumn:h.loc.column+1,endLineNumber:h.endLoc.line,endColumn:h.endLoc.column+1}]:h?[{severity:8,message:h.message,startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}]:[];return(0,i.jsxs)("div",{className:e.root,children:[(0,i.jsxs)("div",{className:e.side,children:[(0,i.jsx)(tw,{title:s,buttons:[["Do",!!d&&function(){if(d){let t=d();try{l({result:n(t),error:null})}catch(t){l({result:c,error:t}),t instanceof S?console.log(t.message):console.log(t)}}}]]}),(0,i.jsx)(tU,{theme:"light",language:t.language,onReady:t=>u({fn:t}),options:tF,width:tP.width,height:tP.height,markers:_})]}),(0,i.jsx)("div",{className:e.side,children:c?a(c):null}),(0,i.jsx)("div",{className:e.clear})]})}let tz=(0,n.Z)(()=>({root:{display:"block"},container:{width:"650px",height:"550px",border:"1px solid lightgray"},hide:{display:"none"},show:{display:"block"},clear:{clear:"both"}}));function tB(t){let e=tz(),{data:s}=t,n=(0,r.useRef)(null),[a,o]=(0,r.useState)(null),l=th();return(0,r.useEffect)(()=>{o(function(t,e){let s=window.vis;if(!s)return null;let i=s.Network,r=s.DataSet,n=":invisible:",a=[{id:n,size:0,borderWidth:0,color:{border:"rgba(0,0,0,0)",background:"rgba(0,0,0,0)"}}],o=[{from:n,to:t.start,color:{color:"#848484"},arrows:"to"}];for(let e of t.states)a.push({id:e,label:e,shape:"circle",borderWidth:t.final.has(e)?4:1});for(let e of t.choices)a.push({id:e,label:"",shape:"diamond",borderWidth:1});for(let{from:e,transition:s,to:i}of t.mTransitions)o.push({from:e,to:i,arrows:"to",label:"".concat(s.name,"(").concat(s.arguments.join(", "),")")});for(let{from:e,transition:s,to:i}of t.lTransitions)o.push({from:e,to:i,arrows:"to",label:s.name});let l={nodes:new r(a),edges:new r(o)},c=new i(e,l,{layout:{},edges:{arrows:{to:{enabled:!0,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},font:{align:"top"}},physics:{enabled:!0,solver:"repulsion",repulsion:{springLength:220}}});return"#forcewhite"===location.hash&&c.on("beforeDrawing",t=>{t.save(),t.setTransform(1,0,0,1,0,0),t.fillStyle="#ffffff",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore()}),c}(s,n.current))},[s]),(0,i.jsxs)("div",{className:e.root,children:[(0,i.jsx)(tw,{title:null,buttons:[["Download",function(){let t=document.createElement("a");t.download="automaton.png",t.href=n.current.querySelector("canvas").toDataURL("image/png"),t.click()}],["Copy automaton in JSON",()=>l(JSON.stringify(tl(s),null,2))]]}),(0,i.jsx)("div",{className:e.container,ref:n})]})}let tJ=(0,n.Z)(()=>({root:{display:"block"},container:{width:"600px"},hide:{display:"none"},show:{display:"block"},clear:{clear:"both"}}));function tW(t){let e=tJ(),{data:s}=t,n=(0,r.useRef)(null),[a,o]=(0,r.useState)(null),l=th();return(0,r.useEffect)(()=>{if(null==a){let t=window.JSONEditor;if(!t)return;let e=new t(n.current,{mode:"view"});o(e),e.set(s)}else a.set(s)},[s]),(0,i.jsxs)("div",{className:e.root,children:[(0,i.jsx)(tw,{title:null,buttons:[["Copy JSON",()=>l(JSON.stringify(s,null,2))]]}),(0,i.jsx)("div",{className:e.container,ref:n})]})}let tq=(0,n.Z)(()=>({root:{display:"block"},pre:{width:"600px",height:"550px",overflow:"auto",border:"1px solid lightgray",margin:"0px",fontSize:"16px"}}));function t$(t){let e=tq(),{data:s}=t,r=th();return(0,i.jsxs)("div",{className:e.root,children:[(0,i.jsx)(tw,{title:null,buttons:[["Copy text",()=>r(s)]]}),(0,i.jsx)("div",{children:(0,i.jsx)("pre",{className:e.pre,children:s})})]})}let tG={view:t=>F(O(t)),parse:t=>O(t),astToAutomaton:t=>tl(F(JSON.parse(t))),automatonToAst:t=>{var e;return function(t,e){let s=[];for(let t of(s.push(J(e.start,e)),e.states))"end"===t||t===e.start||/:/.test(t)||s.push(J(t,e));return y(e.package,e.imports,m(h,t,s))}("NAME",{...e=JSON.parse(t),states:new Set(e.states),choices:new Set(e.choices),final:new Set(e.final)})},generator:t=>(function(t){let e="";for(let{ref:s,staticc:i,star:r}of(t.pkg&&(e+="package ".concat(W(t.pkg.ref),";\n")),t.imports))e+="import ".concat(i?"static ":"").concat(W(s)).concat(r?".*":"",";\n");return"typestate ".concat(t.decl.name," {\n").concat(t.decl.states.map(K).join("\n"),"\n}\n")})(JSON.parse(t))},tV={view:t=>(0,i.jsx)(tB,{data:t}),parse:t=>(0,i.jsx)(tW,{data:t}),astToAutomaton:t=>(0,i.jsx)(tW,{data:t}),automatonToAst:t=>(0,i.jsx)(tW,{data:t}),generator:t=>(0,i.jsx)(t$,{data:t})},tK=(0,n.Z)(t=>({container:{paddingBottom:t.spacing(16)}}));var tX=()=>{let t=tK();return(0,i.jsxs)(tn.wT,{children:[(0,i.jsx)(tT,{}),(0,i.jsxs)(a.Z,{className:t.container,children:[(0,i.jsx)("div",{id:tu[0][1]}),(0,i.jsx)(tZ,{title:tu[0][0],language:"typestate",fn:tG.view,render:tV.view}),(0,i.jsx)("div",{id:tu[1][1]}),(0,i.jsx)(tZ,{title:tu[1][0],language:"typestate",fn:tG.parse,render:tV.parse}),(0,i.jsx)("div",{id:tu[2][1]}),(0,i.jsx)(tZ,{title:tu[2][0],language:"json",fn:tG.astToAutomaton,render:tV.astToAutomaton}),(0,i.jsx)("div",{id:tu[3][1]}),(0,i.jsx)(tZ,{title:tu[3][0],language:"json",fn:tG.automatonToAst,render:tV.automatonToAst}),(0,i.jsx)("div",{id:tu[4][1]}),(0,i.jsx)(tZ,{title:tu[4][0],language:"json",fn:tG.generator,render:tV.generator})]})]})};let tY=()=>(0,i.jsx)(tX,{});var tQ=tY}},function(t){t.O(0,[859,5,774,888,179],function(){return t(t.s=6313)}),_N_E=t.O()}]);